local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UIS = game:GetService("UserInputService")
local Workspace = game:GetService("Workspace")
local LocalPlayer = Players.LocalPlayer
local CoreGui = game:GetService("CoreGui")
local TweenService = game:GetService("TweenService")

-- Modern Color Theme
local Theme = {
    Primary = Color3.fromRGB(20, 20, 30),
    Secondary = Color3.fromRGB(30, 30, 45),
    Tertiary = Color3.fromRGB(40, 40, 60),
    Accent = Color3.fromRGB(88, 101, 242),
    AccentHover = Color3.fromRGB(71, 82, 196),
    Text = Color3.fromRGB(255, 255, 255),
    TextSecondary = Color3.fromRGB(180, 180, 190),
    Success = Color3.fromRGB(67, 181, 129),
    Danger = Color3.fromRGB(240, 71, 71),
    Warning = Color3.fromRGB(250, 166, 26),
    Dark = Color3.fromRGB(15, 15, 22),
    Border = Color3.fromRGB(50, 50, 70)
}

-- Create modern GUI
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "TuffHub"
ScreenGui.ResetOnSpawn = false
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
ScreenGui.DisplayOrder = 999
ScreenGui.Parent = CoreGui

-- Main container
local MainFrame = Instance.new("Frame")
MainFrame.Size = UDim2.new(0, 420, 0, 520)
MainFrame.Position = UDim2.new(0.5, -210, 0.5, -260)
MainFrame.BackgroundColor3 = Theme.Primary
MainFrame.BorderSizePixel = 0
MainFrame.ClipsDescendants = false
MainFrame.Parent = ScreenGui

local MainCorner = Instance.new("UICorner")
MainCorner.CornerRadius = UDim.new(0, 12)
MainCorner.Parent = MainFrame

-- Drop shadow effect
local MainShadow = Instance.new("ImageLabel")
MainShadow.Image = "rbxassetid://1316045217"
MainShadow.ImageColor3 = Color3.fromRGB(0, 0, 0)
MainShadow.ImageTransparency = 0.7
MainShadow.ScaleType = Enum.ScaleType.Slice
MainShadow.SliceCenter = Rect.new(10, 10, 118, 118)
MainShadow.Size = UDim2.new(1, 30, 1, 30)
MainShadow.Position = UDim2.new(0, -15, 0, -15)
MainShadow.BackgroundTransparency = 1
MainShadow.ZIndex = 0
MainFrame.ZIndex = 1
MainShadow.Parent = MainFrame

-- Header
local Header = Instance.new("Frame")
Header.Size = UDim2.new(1, 0, 0, 65)
Header.BackgroundColor3 = Theme.Secondary
Header.BorderSizePixel = 0
Header.ZIndex = 2
Header.Parent = MainFrame

local HeaderCorner = Instance.new("UICorner")
HeaderCorner.CornerRadius = UDim.new(0, 12)
HeaderCorner.Parent = Header

-- Header bottom fix
local HeaderFix = Instance.new("Frame")
HeaderFix.Size = UDim2.new(1, 0, 0, 12)
HeaderFix.Position = UDim2.new(0, 0, 1, -12)
HeaderFix.BackgroundColor3 = Theme.Secondary
HeaderFix.BorderSizePixel = 0
HeaderFix.ZIndex = 2
HeaderFix.Parent = Header

-- Logo/Icon
local Logo = Instance.new("Frame")
Logo.Size = UDim2.new(0, 35, 0, 35)
Logo.Position = UDim2.new(0, 15, 0.5, -17.5)
Logo.BackgroundColor3 = Theme.Accent
Logo.ZIndex = 3
Logo.Parent = Header

local LogoCorner = Instance.new("UICorner")
LogoCorner.CornerRadius = UDim.new(0, 8)
LogoCorner.Parent = Logo

local LogoText = Instance.new("TextLabel")
LogoText.Size = UDim2.new(1, 0, 1, 0)
LogoText.BackgroundTransparency = 1
LogoText.Text = "TH"
LogoText.TextColor3 = Theme.Text
LogoText.Font = Enum.Font.GothamBold
LogoText.TextSize = 16
LogoText.ZIndex = 4
LogoText.Parent = Logo

-- Title
local Title = Instance.new("TextLabel")
Title.Size = UDim2.new(0, 200, 0, 22)
Title.Position = UDim2.new(0, 58, 0, 12)
Title.BackgroundTransparency = 1
Title.Text = "TUFF HUB"
Title.TextColor3 = Theme.Text
Title.Font = Enum.Font.GothamBold
Title.TextSize = 20
Title.TextXAlignment = Enum.TextXAlignment.Left
Title.ZIndex = 3
Title.Parent = Header

local Subtitle = Instance.new("TextLabel")
Subtitle.Size = UDim2.new(0, 200, 0, 16)
Subtitle.Position = UDim2.new(0, 58, 0, 36)
Subtitle.BackgroundTransparency = 1
Subtitle.Text = "Premium Edition ‚Ä¢ v2.5"
Subtitle.TextColor3 = Theme.TextSecondary
Subtitle.Font = Enum.Font.Gotham
Subtitle.TextSize = 11
Subtitle.TextXAlignment = Enum.TextXAlignment.Left
Subtitle.ZIndex = 3
Subtitle.Parent = Header

-- Close Button
local CloseButton = Instance.new("TextButton")
CloseButton.Size = UDim2.new(0, 35, 0, 35)
CloseButton.Position = UDim2.new(1, -50, 0.5, -17.5)
CloseButton.BackgroundColor3 = Theme.Danger
CloseButton.Text = "‚úï"
CloseButton.TextColor3 = Theme.Text
CloseButton.Font = Enum.Font.GothamBold
CloseButton.TextSize = 18
CloseButton.AutoButtonColor = false
CloseButton.ZIndex = 3
CloseButton.Parent = Header

local CloseCorner = Instance.new("UICorner")
CloseCorner.CornerRadius = UDim.new(0, 8)
CloseCorner.Parent = CloseButton

CloseButton.MouseEnter:Connect(function()
    TweenService:Create(CloseButton, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(220, 50, 50)}):Play()
end)

CloseButton.MouseLeave:Connect(function()
    TweenService:Create(CloseButton, TweenInfo.new(0.2), {BackgroundColor3 = Theme.Danger}):Play()
end)

CloseButton.MouseButton1Click:Connect(function()
    TweenService:Create(MainFrame, TweenInfo.new(0.3), {Size = UDim2.new(0, 0, 0, 0)}):Play()
    wait(0.3)
    ScreenGui:Destroy()
end)

-- Minimize button
local MinimizeButton = Instance.new("TextButton")
MinimizeButton.Size = UDim2.new(0, 35, 0, 35)
MinimizeButton.Position = UDim2.new(1, -92, 0.5, -17.5)
MinimizeButton.BackgroundColor3 = Theme.Tertiary
MinimizeButton.Text = "‚àí"
MinimizeButton.TextColor3 = Theme.Text
MinimizeButton.Font = Enum.Font.GothamBold
MinimizeButton.TextSize = 18
MinimizeButton.AutoButtonColor = false
MinimizeButton.ZIndex = 3
MinimizeButton.Parent = Header

local MinimizeCorner = Instance.new("UICorner")
MinimizeCorner.CornerRadius = UDim.new(0, 8)
MinimizeCorner.Parent = MinimizeButton

local ContentVisible = true
MinimizeButton.MouseEnter:Connect(function()
    TweenService:Create(MinimizeButton, TweenInfo.new(0.2), {BackgroundColor3 = Theme.Border}):Play()
end)

MinimizeButton.MouseLeave:Connect(function()
    TweenService:Create(MinimizeButton, TweenInfo.new(0.2), {BackgroundColor3 = Theme.Tertiary}):Play()
end)

MinimizeButton.MouseButton1Click:Connect(function()
    ContentVisible = not ContentVisible
    if ContentVisible then
        TweenService:Create(MainFrame, TweenInfo.new(0.3, Enum.EasingStyle.Quint), {
            Size = UDim2.new(0, 420, 0, 520)
        }):Play()
        MinimizeButton.Text = "‚àí"
    else
        TweenService:Create(MainFrame, TweenInfo.new(0.3, Enum.EasingStyle.Quint), {
            Size = UDim2.new(0, 420, 0, 65)
        }):Play()
        MinimizeButton.Text = "‚ñ°"
    end
end)

-- Content area
local ContentFrame = Instance.new("Frame")
ContentFrame.Size = UDim2.new(1, 0, 1, -65)
ContentFrame.Position = UDim2.new(0, 0, 0, 65)
ContentFrame.BackgroundTransparency = 1
ContentFrame.ZIndex = 2
ContentFrame.Parent = MainFrame

-- Tabs
local Tabs = {
    {Name = "Targets", Icon = "üéØ"},
    {Name = "Player", Icon = "üë§"},
    {Name = "Aura", Icon = "‚öîÔ∏è"},
    {Name = "Settings", Icon = "‚öôÔ∏è"}
}

local TabButtons = {}
local TabContents = {}

local TabsContainer = Instance.new("Frame")
TabsContainer.Size = UDim2.new(1, -30, 0, 45)
TabsContainer.Position = UDim2.new(0, 15, 0, 10)
TabsContainer.BackgroundTransparency = 1
TabsContainer.ZIndex = 3
TabsContainer.Parent = ContentFrame

for i, tab in ipairs(Tabs) do
    local TabButton = Instance.new("TextButton")
    TabButton.Size = UDim2.new(0.25, -8, 1, 0)
    TabButton.Position = UDim2.new((i-1)*0.25, ((i-1)*8)/4, 0, 0)
    TabButton.BackgroundColor3 = Theme.Dark
    TabButton.Text = tab.Icon .. "\n" .. tab.Name
    TabButton.TextColor3 = Theme.TextSecondary
    TabButton.Font = Enum.Font.GothamBold
    TabButton.TextSize = 11
    TabButton.AutoButtonColor = false
    TabButton.ZIndex = 3
    TabButton.Parent = TabsContainer
    
    local TabCorner = Instance.new("UICorner")
    TabCorner.CornerRadius = UDim.new(0, 8)
    TabCorner.Parent = TabButton
    
    local TabStroke = Instance.new("UIStroke")
    TabStroke.Color = Theme.Border
    TabStroke.Thickness = 1
    TabStroke.Transparency = 0.5
    TabStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
    TabStroke.Parent = TabButton
    
    -- Tab content with ScrollingFrame
    local TabContent = Instance.new("ScrollingFrame")
    TabContent.Size = UDim2.new(1, -30, 1, -75)
    TabContent.Position = UDim2.new(0, 15, 0, 65)
    TabContent.BackgroundTransparency = 1
    TabContent.ScrollBarThickness = 4
    TabContent.ScrollBarImageColor3 = Theme.Accent
    TabContent.BorderSizePixel = 0
    TabContent.CanvasSize = UDim2.new(0, 0, 0, 0)
    TabContent.AutomaticCanvasSize = Enum.AutomaticSize.Y
    TabContent.Visible = i == 1
    TabContent.ZIndex = 3
    TabContent.Parent = ContentFrame
    
    local ContentLayout = Instance.new("UIListLayout")
    ContentLayout.Padding = UDim.new(0, 12)
    ContentLayout.SortOrder = Enum.SortOrder.LayoutOrder
    ContentLayout.Parent = TabContent
    
    local ContentPadding = Instance.new("UIPadding")
    ContentPadding.PaddingTop = UDim.new(0, 5)
    ContentPadding.PaddingBottom = UDim.new(0, 10)
    ContentPadding.Parent = TabContent
    
    TabButtons[tab.Name] = TabButton
    TabContents[tab.Name] = TabContent
    
    TabButton.MouseButton1Click:Connect(function()
        for name, content in pairs(TabContents) do
            content.Visible = false
        end
        TabContent.Visible = true
        
        for name, btn in pairs(TabButtons) do
            if name == tab.Name then
                TweenService:Create(btn, TweenInfo.new(0.2), {
                    BackgroundColor3 = Theme.Accent,
                    TextColor3 = Theme.Text
                }):Play()
            else
                TweenService:Create(btn, TweenInfo.new(0.2), {
                    BackgroundColor3 = Theme.Dark,
                    TextColor3 = Theme.TextSecondary
                }):Play()
            end
        end
    end)
    
    TabButton.MouseEnter:Connect(function()
        if TabButton.BackgroundColor3 ~= Theme.Accent then
            TweenService:Create(TabButton, TweenInfo.new(0.2), {
                BackgroundColor3 = Theme.Tertiary
            }):Play()
        end
    end)
    
    TabButton.MouseLeave:Connect(function()
        if TabButton.BackgroundColor3 ~= Theme.Accent then
            TweenService:Create(TabButton, TweenInfo.new(0.2), {
                BackgroundColor3 = Theme.Dark
            }):Play()
        end
    end)
end

-- Set first tab as active
TabButtons["Targets"].BackgroundColor3 = Theme.Accent
TabButtons["Targets"].TextColor3 = Theme.Text

-- Create UI elements
local connections = {}
local buttonStates = {}
local auraEnabled = false
local auraConnection
local PlayerSpeed = 16
local auraDetectionRadius = 10

-- Function to create section header
local function createSection(title, parent)
    local section = Instance.new("Frame")
    section.Size = UDim2.new(1, 0, 0, 35)
    section.BackgroundColor3 = Theme.Secondary
    section.BorderSizePixel = 0
    section.LayoutOrder = #parent:GetChildren()
    section.ZIndex = 4
    section.Parent = parent
    
    local sectionCorner = Instance.new("UICorner")
    sectionCorner.CornerRadius = UDim.new(0, 8)
    sectionCorner.Parent = section
    
    local sectionStroke = Instance.new("UIStroke")
    sectionStroke.Color = Theme.Border
    sectionStroke.Thickness = 1
    sectionStroke.Transparency = 0.5
    sectionStroke.Parent = section
    
    local sectionTitle = Instance.new("TextLabel")
    sectionTitle.Size = UDim2.new(1, -20, 1, 0)
    sectionTitle.Position = UDim2.new(0, 10, 0, 0)
    sectionTitle.BackgroundTransparency = 1
    sectionTitle.Text = string.upper(title)
    sectionTitle.TextColor3 = Theme.Accent
    sectionTitle.Font = Enum.Font.GothamBold
    sectionTitle.TextSize = 12
    sectionTitle.TextXAlignment = Enum.TextXAlignment.Left
    sectionTitle.ZIndex = 5
    sectionTitle.Parent = section
    
    return parent
end

-- Function to create toggle
local function createToggle(name, defaultValue, callback, parent)
    local toggleFrame = Instance.new("Frame")
    toggleFrame.Size = UDim2.new(1, 0, 0, 42)
    toggleFrame.BackgroundColor3 = Theme.Secondary
    toggleFrame.BorderSizePixel = 0
    toggleFrame.LayoutOrder = #parent:GetChildren()
    toggleFrame.ZIndex = 4
    toggleFrame.Parent = parent
    
    local toggleCorner = Instance.new("UICorner")
    toggleCorner.CornerRadius = UDim.new(0, 8)
    toggleCorner.Parent = toggleFrame
    
    local toggleStroke = Instance.new("UIStroke")
    toggleStroke.Color = Theme.Border
    toggleStroke.Thickness = 1
    toggleStroke.Transparency = 0.5
    toggleStroke.Parent = toggleFrame
    
    local toggleLabel = Instance.new("TextLabel")
    toggleLabel.Size = UDim2.new(1, -70, 1, 0)
    toggleLabel.Position = UDim2.new(0, 12, 0, 0)
    toggleLabel.BackgroundTransparency = 1
    toggleLabel.Text = name
    toggleLabel.TextColor3 = Theme.Text
    toggleLabel.Font = Enum.Font.Gotham
    toggleLabel.TextSize = 13
    toggleLabel.TextXAlignment = Enum.TextXAlignment.Left
    toggleLabel.ZIndex = 5
    toggleLabel.Parent = toggleFrame
    
    local toggleButton = Instance.new("Frame")
    toggleButton.Size = UDim2.new(0, 48, 0, 26)
    toggleButton.Position = UDim2.new(1, -60, 0.5, -13)
    toggleButton.BackgroundColor3 = defaultValue and Theme.Success or Theme.Dark
    toggleButton.BorderSizePixel = 0
    toggleButton.ZIndex = 5
    toggleButton.Parent = toggleFrame
    
    local toggleBtnCorner = Instance.new("UICorner")
    toggleBtnCorner.CornerRadius = UDim.new(1, 0)
    toggleBtnCorner.Parent = toggleButton
    
    local toggleDot = Instance.new("Frame")
    toggleDot.Size = UDim2.new(0, 22, 0, 22)
    toggleDot.Position = defaultValue and UDim2.new(0, 24, 0.5, -11) or UDim2.new(0, 2, 0.5, -11)
    toggleDot.BackgroundColor3 = Theme.Text
    toggleDot.BorderSizePixel = 0
    toggleDot.ZIndex = 6
    toggleDot.Parent = toggleButton
    
    local dotCorner = Instance.new("UICorner")
    dotCorner.CornerRadius = UDim.new(1, 0)
    dotCorner.Parent = toggleDot
    
    local toggleBtn = Instance.new("TextButton")
    toggleBtn.Size = UDim2.new(1, 0, 1, 0)
    toggleBtn.BackgroundTransparency = 1
    toggleBtn.Text = ""
    toggleBtn.ZIndex = 7
    toggleBtn.Parent = toggleButton
    
    toggleBtn.MouseButton1Click:Connect(function()
        defaultValue = not defaultValue
        
        TweenService:Create(toggleButton, TweenInfo.new(0.2), {
            BackgroundColor3 = defaultValue and Theme.Success or Theme.Dark
        }):Play()
        
        TweenService:Create(toggleDot, TweenInfo.new(0.2), {
            Position = defaultValue and UDim2.new(0, 24, 0.5, -11) or UDim2.new(0, 2, 0.5, -11)
        }):Play()
        
        callback(defaultValue)
    end)
    
    return toggleFrame
end

-- Function to create slider
local function createSlider(name, min, max, defaultValue, callback, parent)
    local sliderFrame = Instance.new("Frame")
    sliderFrame.Size = UDim2.new(1, 0, 0, 68)
    sliderFrame.BackgroundColor3 = Theme.Secondary
    sliderFrame.BorderSizePixel = 0
    sliderFrame.LayoutOrder = #parent:GetChildren()
    sliderFrame.ZIndex = 4
    sliderFrame.Parent = parent
    
    local sliderCorner = Instance.new("UICorner")
    sliderCorner.CornerRadius = UDim.new(0, 8)
    sliderCorner.Parent = sliderFrame
    
    local sliderStroke = Instance.new("UIStroke")
    sliderStroke.Color = Theme.Border
    sliderStroke.Thickness = 1
    sliderStroke.Transparency = 0.5
    sliderStroke.Parent = sliderFrame
    
    local sliderLabel = Instance.new("TextLabel")
    sliderLabel.Size = UDim2.new(0.7, 0, 0, 20)
    sliderLabel.Position = UDim2.new(0, 12, 0, 8)
    sliderLabel.BackgroundTransparency = 1
    sliderLabel.Text = name
    sliderLabel.TextColor3 = Theme.Text
    sliderLabel.Font = Enum.Font.Gotham
    sliderLabel.TextSize = 13
    sliderLabel.TextXAlignment = Enum.TextXAlignment.Left
    sliderLabel.ZIndex = 5
    sliderLabel.Parent = sliderFrame
    
    local valueLabel = Instance.new("TextLabel")
    valueLabel.Size = UDim2.new(0.3, 0, 0, 20)
    valueLabel.Position = UDim2.new(0.7, 0, 0, 8)
    valueLabel.BackgroundTransparency = 1
    valueLabel.Text = tostring(defaultValue)
    valueLabel.TextColor3 = Theme.Accent
    valueLabel.Font = Enum.Font.GothamBold
    valueLabel.TextSize = 13
    valueLabel.TextXAlignment = Enum.TextXAlignment.Right
    valueLabel.ZIndex = 5
    valueLabel.Parent = sliderFrame
    
    local sliderContainer = Instance.new("Frame")
    sliderContainer.Size = UDim2.new(1, -24, 0, 28)
    sliderContainer.Position = UDim2.new(0, 12, 0, 32)
    sliderContainer.BackgroundColor3 = Theme.Dark
    sliderContainer.BorderSizePixel = 0
    sliderContainer.ZIndex = 5
    sliderContainer.Parent = sliderFrame
    
    local containerCorner = Instance.new("UICorner")
    containerCorner.CornerRadius = UDim.new(0, 8)
    containerCorner.Parent = sliderContainer
    
    local sliderFill = Instance.new("Frame")
    sliderFill.Size = UDim2.new((defaultValue - min) / (max - min), 0, 1, 0)
    sliderFill.BackgroundColor3 = Theme.Accent
    sliderFill.BorderSizePixel = 0
    sliderFill.ZIndex = 6
    sliderFill.Parent = sliderContainer
    
    local fillCorner = Instance.new("UICorner")
    fillCorner.CornerRadius = UDim.new(0, 8)
    fillCorner.Parent = sliderFill
    
    local sliderBtn = Instance.new("TextButton")
    sliderBtn.Size = UDim2.new(1, 0, 1, 0)
    sliderBtn.BackgroundTransparency = 1
    sliderBtn.Text = ""
    sliderBtn.ZIndex = 7
    sliderBtn.Parent = sliderContainer
    
    local dragging = false
    
    sliderBtn.MouseButton1Down:Connect(function()
        dragging = true
    end)
    
    UIS.InputEnded:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = false
        end
    end)
    
    local function updateSlider(input)
        local mousePos = UIS:GetMouseLocation()
        local sliderPos = sliderContainer.AbsolutePosition
        local sliderSize = sliderContainer.AbsoluteSize
        
        local relativeX = math.clamp(mousePos.X - sliderPos.X, 0, sliderSize.X)
        local ratio = relativeX / sliderSize.X
        local value = math.floor(min + (max - min) * ratio)
        
        sliderFill.Size = UDim2.new(ratio, 0, 1, 0)
        valueLabel.Text = tostring(value)
        callback(value)
    end
    
    sliderBtn.MouseButton1Down:Connect(function(input)
        updateSlider(input)
    end)
    
    sliderBtn.InputChanged:Connect(function(input)
        if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
            updateSlider(input)
        end
    end)
    
    return sliderFrame
end

-- Function to create button
local function createButton(name, callback, parent, color)
    local button = Instance.new("TextButton")
    button.Size = UDim2.new(1, 0, 0, 42)
    button.BackgroundColor3 = color or Theme.Accent
    button.Text = name
    button.TextColor3 = Theme.Text
    button.Font = Enum.Font.GothamBold
    button.TextSize = 13
    button.AutoButtonColor = false
    button.LayoutOrder = #parent:GetChildren()
    button.ZIndex = 4
    button.Parent = parent
    
    local buttonCorner = Instance.new("UICorner")
    buttonCorner.CornerRadius = UDim.new(0, 8)
    buttonCorner.Parent = button
    
    local buttonStroke = Instance.new("UIStroke")
    buttonStroke.Color = color or Theme.Accent
    buttonStroke.Thickness = 2
    buttonStroke.Transparency = 0.5
    buttonStroke.Parent = button
    
    button.MouseEnter:Connect(function()
        TweenService:Create(button, TweenInfo.new(0.2), {
            BackgroundColor3 = color and Color3.fromRGB(
                math.min(color.R * 255 + 20, 255),
                math.min(color.G * 255 + 20, 255),
                math.min(color.B * 255 + 20, 255)
            ) / 255 or Theme.AccentHover
        }):Play()
    end)
    
    button.MouseLeave:Connect(function()
        TweenService:Create(button, TweenInfo.new(0.2), {
            BackgroundColor3 = color or Theme.Accent
        }):Play()
    end)
    
    button.MouseButton1Click:Connect(function()
        TweenService:Create(button, TweenInfo.new(0.1), {
            Size = UDim2.new(1, 0, 0, 38)
        }):Play()
        wait(0.1)
        TweenService:Create(button, TweenInfo.new(0.1), {
            Size = UDim2.new(1, 0, 0, 42)
        }):Play()
        callback()
    end)
    
    return button
end

-- Populate Targets tab
createSection("üéØ Auto Farm Nodes", TabContents["Targets"])

local targetList = {
    "Tin Node", "Copper Node", "Stone Node", "Marble Node", "Iron Node"
}

for _, targetName in ipairs(targetList) do
    createToggle(targetName, false, function(state)
        buttonStates[targetName] = state
        if state then
            spawn(function()
                local Character = LocalPlayer.Character
                if not Character then return end
                
                while buttonStates[targetName] and Character.Parent do
                    local HumanoidRootPart = Character:FindFirstChild("HumanoidRootPart")
                    if not HumanoidRootPart then break end
                    
                    local closest
                    local shortestDistance = math.huge
                    
                    for _, obj in ipairs(Workspace:GetDescendants()) do
                        if obj:IsA("Model") and obj.Name == targetName then
                            local distance = (HumanoidRootPart.Position - obj:GetPivot().Position).Magnitude
                            if distance < shortestDistance then
                                shortestDistance = distance
                                closest = obj
                            end
                        end
                    end
                    
                    if closest then
                        local targetPos = closest:GetPivot().Position
                        local direction = (targetPos - HumanoidRootPart.Position)
                        local distance = direction.Magnitude
                        
                        if distance > 5 then
                            HumanoidRootPart.CFrame = HumanoidRootPart.CFrame + direction.Unit * 25 * RunService.Heartbeat:Wait()
                        end
                    end
                    
                    RunService.Heartbeat:Wait()
                end
            end)
        end
    end, TabContents["Targets"])
end

createSection("üåø Auto Farm Resources", TabContents["Targets"])

local resourceList = {
    "Tree", "Fiber Plant", "Prickly Pear", "Apple", "Corn Plant"
}

for _, resourceName in ipairs(resourceList) do
    createToggle(resourceName, false, function(state)
        buttonStates[resourceName] = state
        if state then
            -- Similar logic as nodes
        end
    end, TabContents["Targets"])
end

createSection("üêÑ Auto Farm Animals", TabContents["Targets"])

local animalList = {"Cow", "Sheep"}

for _, animalName in ipairs(animalList) do
    createToggle(animalName, false, function(state)
        buttonStates[animalName] = state
    end, TabContents["Targets"])
end

-- Populate Player tab
createSection("‚ö° Speed Modifications", TabContents["Player"])

createSlider("Walk Speed", 16, 150, PlayerSpeed, function(value)
    PlayerSpeed = value
    local Character = LocalPlayer.Character
    if Character then
        local Humanoid = Character:FindFirstChild("Humanoid")
        if Humanoid then
            Humanoid.WalkSpeed = value
        end
    end
end, TabContents["Player"])

createSlider("Jump Power", 50, 250, 50, function(value)
    local Character = LocalPlayer.Character
    if Character then
        local Humanoid = Character:FindFirstChild("Humanoid")
        if Humanoid then
            Humanoid.JumpPower = value
        end
    end
end, TabContents["Player"])

createSection("‚úàÔ∏è Movement", TabContents["Player"])

createToggle("Enable Flight", false, function(state)
    if state then
        local flySpeed = 50
        local bodyVelocity = Instance.new("BodyVelocity")
        bodyVelocity.MaxForce = Vector3.new(4000, 4000, 4000)
        bodyVelocity.Velocity = Vector3.new(0, 0, 0)
        
        local Character = LocalPlayer.Character
        if Character then
            local HumanoidRootPart = Character:FindFirstChild("HumanoidRootPart")
            if HumanoidRootPart then
                bodyVelocity.Parent = HumanoidRootPart
            end
        end
        
        connections["Fly"] = RunService.Heartbeat:Connect(function()
            if not buttonStates["Fly"] then return end
            
            local Character = LocalPlayer.Character
            if not Character then return end
            
            local HumanoidRootPart = Character:FindFirstChild("HumanoidRootPart")
            if not HumanoidRootPart then return end
            
            local cam = Workspace.CurrentCamera
            local moveVector = Vector3.new(0, 0, 0)
            
            if UIS:IsKeyDown(Enum.KeyCode.W) then moveVector = moveVector + cam.CFrame.LookVector end
            if UIS:IsKeyDown(Enum.KeyCode.S) then moveVector = moveVector - cam.CFrame.LookVector end
            if UIS:IsKeyDown(Enum.KeyCode.A) then moveVector = moveVector - cam.CFrame.RightVector end
            if UIS:IsKeyDown(Enum.KeyCode.D) then moveVector = moveVector + cam.CFrame.RightVector end
            if UIS:IsKeyDown(Enum.KeyCode.Space) then moveVector = moveVector + Vector3.new(0, 1, 0) end
            if UIS:IsKeyDown(Enum.KeyCode.LeftShift) then moveVector = moveVector - Vector3.new(0, 1, 0) end
            
            bodyVelocity.Velocity = moveVector.Unit * flySpeed
        end)
    else
        if connections["Fly"] then
            connections["Fly"]:Disconnect()
            connections["Fly"] = nil
        end
        local Character = LocalPlayer.Character
        if Character then
            local HumanoidRootPart = Character:FindFirstChild("HumanoidRootPart")
            if HumanoidRootPart then
                local bodyVelocity = HumanoidRootPart:FindFirstChild("BodyVelocity")
                if bodyVelocity then bodyVelocity:Destroy() end
            end
        end
    end
    buttonStates["Fly"] = state
end, TabContents["Player"])

-- Populate Aura tab
createSection("‚öîÔ∏è Combat Settings", TabContents["Aura"])

createToggle("Enable Auto Attack", auraEnabled, function(state)
    auraEnabled = state
    
    if state then
        auraConnection = RunService.Heartbeat:Connect(function()
            if not auraEnabled then return end
            
            local Character = LocalPlayer.Character
            if not Character then return end
            
            local HumanoidRootPart = Character:FindFirstChild("HumanoidRootPart")
            local currentTool = Character:FindFirstChildOfClass("Tool")
            
            if not HumanoidRootPart or not currentTool then return end
            
            local charPos = HumanoidRootPart.Position
            
            for _, player in ipairs(Players:GetPlayers()) do
                if player ~= LocalPlayer and player.Character then
                    local humanoidRoot = player.Character:FindFirstChild("HumanoidRootPart")
                    if humanoidRoot then
                        local distance = (charPos - humanoidRoot.Position).Magnitude
                        if distance <= auraDetectionRadius then
                            currentTool:Activate()
                            return
                        end
                    end
                end
            end
        end)
    else
        if auraConnection then
            auraConnection:Disconnect()
            auraConnection = nil
        end
    end
end, TabContents["Aura"])

createSlider("Attack Radius", 5, 50, auraDetectionRadius, function(value)
    auraDetectionRadius = value
end, TabContents["Aura"])

createSection("üéØ Target Options", TabContents["Aura"])

createToggle("Target Players", true, function(state)
    buttonStates["TargetPlayers"] = state
end, TabContents["Aura"])

createToggle("Target Mobs", true, function(state)
    buttonStates["TargetMobs"] = state
end, TabContents["Aura"])

createToggle("Target Nodes", false, function(state)
    buttonStates["TargetNodes"] = state
end, TabContents["Aura"])

-- Populate Settings tab
createSection("üíæ Configuration", TabContents["Settings"])

createButton("üíæ Save Settings", function()
    local notification = Instance.new("Frame")
    notification.Size = UDim2.new(0, 250, 0, 50)
    notification.Position = UDim2.new(0.5, -125, 1, 20)
    notification.BackgroundColor3 = Theme.Success
    notification.ZIndex = 10
    notification.Parent = MainFrame
    
    local notifCorner = Instance.new("UICorner")
    notifCorner.CornerRadius = UDim.new(0, 8)
    notifCorner.Parent = notification
    
    local notifText = Instance.new("TextLabel")
    notifText.Size = UDim2.new(1, -20, 1, 0)
    notifText.Position = UDim2.new(0, 10, 0, 0)
    notifText.BackgroundTransparency = 1
    notifText.Text = "‚úì Settings Saved Successfully!"
    notifText.TextColor3 = Theme.Text
    notifText.Font = Enum.Font.GothamBold
    notifText.TextSize = 13
    notifText.ZIndex = 11
    notifText.Parent = notification
    
    TweenService:Create(notification, TweenInfo.new(0.3), {Position = UDim2.new(0.5, -125, 1, -70)}):Play()
    
    delay(2, function()
        TweenService:Create(notification, TweenInfo.new(0.3), {Position = UDim2.new(0.5, -125, 1, 20)}):Play()
        wait(0.3)
        notification:Destroy()
    end)
end, TabContents["Settings"], Theme.Success)

createButton("üìÇ Load Settings", function()
    -- Load logic here
end, TabContents["Settings"], Theme.Accent)

createButton("üîÑ Reset All", function()
    PlayerSpeed = 16
    auraDetectionRadius = 10
    auraEnabled = false
    
    for name, state in pairs(buttonStates) do
        if state then
            buttonStates[name] = false
        end
    end
end, TabContents["Settings"], Theme.Danger)

createSection("‚ÑπÔ∏è Information", TabContents["Settings"])

local InfoFrame = Instance.new("Frame")
InfoFrame.Size = UDim2.new(1, 0, 0, 120)
InfoFrame.BackgroundColor3 = Theme.Secondary
InfoFrame.BorderSizePixel = 0
InfoFrame.LayoutOrder = 999
InfoFrame.ZIndex = 4
InfoFrame.Parent = TabContents["Settings"]

local InfoCorner = Instance.new("UICorner")
InfoCorner.CornerRadius = UDim.new(0, 8)
InfoCorner.Parent = InfoFrame

local InfoStroke = Instance.new("UIStroke")
InfoStroke.Color = Theme.Border
InfoStroke.Thickness = 1
InfoStroke.Transparency = 0.5
InfoStroke.Parent = InfoFrame

local InfoText = Instance.new("TextLabel")
InfoText.Size = UDim2.new(1, -20, 1, -20)
InfoText.Position = UDim2.new(0, 10, 0, 10)
InfoText.BackgroundTransparency = 1
InfoText.Text = [[CONTROLS:
‚Ä¢ Right Ctrl: Toggle Auto Attack
‚Ä¢ Drag Header: Move Window
‚Ä¢ ESC: Quick Close
  
VERSION: 2.5 Premium
CREATED BY: Tuff Hub Team]]
InfoText.TextColor3 = Theme.TextSecondary
InfoText.Font = Enum.Font.Gotham
InfoText.TextSize = 11
InfoText.TextXAlignment = Enum.TextXAlignment.Left
InfoText.TextYAlignment = Enum.TextYAlignment.Top
InfoText.ZIndex = 5
InfoText.Parent = InfoFrame

-- Make window draggable
local dragging = false
local dragStart
local startPos

Header.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = true
        dragStart = input.Position
        startPos = MainFrame.Position
        
        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                dragging = false
            end
        end)
    end
end)

Header.InputChanged:Connect(function(input)
    if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
        local delta = input.Position - dragStart
        MainFrame.Position = UDim2.new(
            startPos.X.Scale,
            startPos.X.Offset + delta.X,
            startPos.Y.Scale,
            startPos.Y.Offset + delta.Y
        )
    end
end)

-- Quick close with ESC
UIS.InputBegan:Connect(function(input, gameProcessed)
    if not gameProcessed then
        if input.KeyCode == Enum.KeyCode.Escape then
            ScreenGui:Destroy()
        elseif input.KeyCode == Enum.KeyCode.RightControl then
            auraEnabled = not auraEnabled
        end
    end
end)

-- Intro animation
MainFrame.Size = UDim2.new(0, 0, 0, 0)
TweenService:Create(MainFrame, TweenInfo.new(0.5, Enum.EasingStyle.Back), {
    Size = UDim2.new(0, 420, 0, 520)
}):Play()

print("‚úì Tuff Hub v2.5 Premium Edition Loaded!")
print("‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ")
print("Controls:")
print("‚Ä¢ ESC: Quick Close")
print("‚Ä¢ Right Ctrl: Toggle Auto Attack")
print("‚Ä¢ Drag Header: Move Window")
print("‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ")
